<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dinesh Kumar Sah</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
        nav { background: #333; padding: 10px; text-align: center; }
        nav a { color: white; margin: 0 15px; text-decoration: none; font-size: 18px; }
        section { padding: 20px; }
        h1 { color: #333; }
        form {
            max-width: 400px;
            margin: auto;
            padding: 10px;
            display: flex;
            flex-direction: column;
        }
        input, textarea {
            margin-bottom: 10px;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            background-color: #333;
            color: white;
            padding: 10px;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #555;
        }
        #formStatus {
            text-align: center;
            margin-top: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>

<nav>
    <a href="#home">Home</a>
    <a href="#projects">Projects</a>
    <a href="#publications">Publications</a>
    <a href="#lectures">Lectures & Courses</a>
    <a href="#demos">Live Demos</a>
    <a href="blog.html">Blog</a>
    <a href="#news">News</a>
    <a href="#contact">Contact</a>
</nav>

<section id="home">
    <h1>Welcome to My Website</h1>
    <p>Hello, Iâ€™m Dinesh Kumar Sah, a researcher in Networking, Communication, AI, ML, and Automation.</p>
</section>

<section id="publications">
    <h1>Journal Publications 
        <a href="https://scholar.google.com/citations?user=5rvrZk8AAAAJ&hl=en&oi=ao" target="_blank">
            <img src="https://upload.wikimedia.org/wikipedia/commons/c/c7/Google_Scholar_logo.svg" 
                 alt="Google Scholar" width="30" height="30" style="vertical-align: middle;">
        </a>
    </h1>
    <ul id="journals-list">Loading journal papers...</ul>
</section>

<section id="publications">
    <h1>Conference and Book Chapters
        <a href="https://scholar.google.com/citations?user=5rvrZk8AAAAJ&hl=en&oi=ao" target="_blank">
            <img src="https://upload.wikimedia.org/wikipedia/commons/c/c7/Google_Scholar_logo.svg" 
                 alt="Google Scholar" width="30" height="30" style="vertical-align: middle;">
        </a>
    </h1>
    <ul id="papers-list">Loading papers...</ul>
</section>

<section id="projects">
    <h1>Projects</h1>
    <ul id="projects-list">Loading projects...</ul>
</section>

<section id="lectures">
    <h1>Lectures & Courses</h1>
    <ul id="lectures-list">Loading lectures...</ul>
</section>

<section id="demos">
    <h1>Live Demos</h1>
    <p>Interactive visualizations and graphs will be hosted here.</p>
</section>

<section id="news">
    <h1>Latest News</h1>
    <ul id="news-list">Loading news...</ul>
</section>

<section id="contact">
    <h1>Contact Me</h1>
    <form id="contactForm">
        <label for="contact-name">Name:</label>
        <input type="text" id="contact-name" name="contact-name" required>
        
        <label for="contact-email">Email:</label>
        <input type="email" id="contact-email" name="contact-email" required>
        
        <label for="contact-message">Message:</label>
        <textarea id="contact-message" name="contact-message" rows="4" required></textarea>
        
        <button type="submit">Send Message</button>
    </form>
    <p id="formStatus"></p>
</section>

<section id="visitor-count">
    <h2>Visitors</h2>
    <p>Total Visits: <span id="visit-count">Loading...</span></p>
</section>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-firestore.js";

    // Your Firebase Configuration (Replace with your actual credentials)
    const firebaseConfig = {
    apiKey: "AIzaSyALmsmp7Ucl5R_MDv22D4RGgfpVOBVGSXM",
    authDomain: "visitortracker-b05e8.firebaseapp.com",
    projectId: "visitortracker-b05e8",
    storageBucket: "visitortracker-b05e8.firebasestorage.app",
    messagingSenderId: "436116621979",
    appId: "1:436116621979:web:8ce66c51e2e0ae87d2143e",
    measurementId: "G-VPR4KCX82P"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function logVisitor() {
        try {
            const ipResponse = await fetch('https://api.ipify.org?format=json');
            const ipData = await ipResponse.json();
            const visitorIP = ipData.ip;

            const locationResponse = await fetch(`https://ipapi.co/${visitorIP}/json/`);
            const locationData = await locationResponse.json();

            const visitorData = {
                ip: visitorIP,
                city: locationData.city || "Unknown",
                country: locationData.country_name || "Unknown",
                browser: navigator.userAgent,
                date: new Date().toISOString()
            };

            await addDoc(collection(db, "visitors"), visitorData);
            console.log("Visitor logged in Firebase");
        } catch (error) {
            console.error("Error logging visitor:", error);
        }
    }

    async function updateVisitorCount() {
        try {
            const querySnapshot = await getDocs(collection(db, "visitors"));
            let visitorCount = querySnapshot.size;
            document.getElementById("visit-count").innerText = visitorCount;
        } catch (error) {
            console.error("Error fetching visitor count:", error);
        }
    }

    logVisitor();
    updateVisitorCount();

    document.getElementById("contactForm").addEventListener("submit", async function (event) {
        event.preventDefault();
        let name = document.getElementById("contact-name").value;
        let email = document.getElementById("contact-email").value;
        let message = document.getElementById("contact-message").value;

        try {
            await addDoc(collection(db, "messages"), { name, email, message, timestamp: new Date().toISOString() });
            document.getElementById("formStatus").innerText = "Message sent successfully!";
            document.getElementById("formStatus").style.color = "green";
            document.getElementById("contactForm").reset();
        } catch (error) {
            console.error("Error sending message:", error);
            document.getElementById("formStatus").innerText = "Error sending message. Try again.";
            document.getElementById("formStatus").style.color = "red";
        }
    });
</script>

</body>
</html>
